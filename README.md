## 방탈출 예약 대기

### 사용자
- 일반 사용자: 방탈출 게임을 하고 싶은 고객
- 관리자: 고객들의 예약을 확인하고 관리하는 사람

### 일반 사용자

#### 로그인 페이지
- 이메일과 비밀번호를 입력해서 로그인할 수 있다.
  - 이메일의 형식을 지켜야한다.

#### 홈 페이지
- 최근 일주일간 가장 인기 있었던 10개의 테마를 확인할 수 있다.

#### 예약 페이지
- 특정 날짜와 테마를 선택했을 때 예약 가능한 시간을 확인할 수 있다.
- 날짜를 선택하고, 테마를 선택한 후, 가능한 시간대 중 원하는 시간을 선택해 예약할 수 있다.
  - 과거 날짜에는 예약할 수 없다.
  - 예약 시 토스페이먼츠 결제 시스템을 통해 결제를 진행한다.
    - 결제 정보(paymentKey, orderId, amount, paymentType)를 입력하면 토스페이먼츠 결제 승인 API를 통해 결제가 처리된다.
    - 결제가 성공적으로 완료되면 예약이 확정된다.
  - 같은 날짜, 같은 테마, 같은 시간에 중복 예약을 시도하면 예약 대기 상태로 등록된다.
    - 대기 순번은 예약 신청 순서대로 결정된다.
    - 앞선 대기 순번이 취소하면 자동으로 대기 순번이 올라간다.
  - 같은 사용자가 동일한 날짜, 테마, 시간에 중복 예약을 시도하면 에약이 추가되지 않는다.
  - 등록되지 않은 테마나 시간대에 예약을 시도하면 예약이 추가되지 않는다.

#### 마이페이지
- 내가 신청한 모든 예약을 확인할 수 있다.
  - 예약 상태가 '확정'인 경우 확정된 예약으로 표시된다.
  - 예약 상태가 '대기'인 경우 현재 대기 순번을 확인할 수 있다.
    - 예: "1번째 대기", "2번째 대기"
- 대기 중인 예약을 취소할 수 있다.
  - 예약을 취소하면 뒤의 대기 순번들이 자동으로 한 단계씩 앞당겨진다.
- 확정된 예약을 취소할 수 있다.
  - 확정 예약을 취소하면 1번째 대기자가 자동으로 확정 상태로 변경된다.
  - 대기자가 없는 경우 해당 시간대의 예약이 완전히 삭제된다.

---

### 관리자

#### 로그인 페이지
- 이메일과 비밀번호를 입력해서 로그인할 수 있다.
  - 이메일의 형식을 지켜야한다.

#### 어드민 홈 페이지
- 시스템 전체를 관리할 수 있는 관리자 대시보드에 접근할 수 있다.

#### 예약 관리 페이지
- 모든 예약 목록을 조회할 수 있다.
  - 각 예약 정보에는 예약자 이름, 테마 정보, 예약 날짜, 예약 시간이 포함된다.
  - 보고 싶은 예약을 필터링 할 수 있다
    - 일반 사용자, 테마, 날짜의 범위를 선택할 수 있다
    - 각 검색 필터 항목들을 선택해도 되고, 선택하지 않아도 된다.
- 새로운 예약을 직접 추가할 수 있다.
  - 일반 사용자, 예약 시간, 예약 테마를 직접 골라 예약을 추가한다
  - 과거 날짜에는 예약할 수 없다.
  - 등록되지 않은 테마나 시간대에 예약을 시도하면 예약이 추가되지 않는다.
  - 해당 시간대에 이미 확정 예약이 있는 경우 자동으로 대기 상태로 등록된다.
  - 같은 사용자가 동일한 날짜, 테마, 시간에 중복 예약을 시도하면 예약이 추가되지 않는다.
- 예약을 삭제할 수 있다.
  - 대기 예약을 삭제하면 뒤의 대기 순번들이 자동으로 앞당겨진다.
  - 확정 예약을 삭제하면 1번째 대기자가 자동으로 확정 상태로 승격된다.
  - 대기자가 없는 확정 예약을 삭제하면 해당 예약 시간대가 완전히 삭제된다.
  - 존재하지 않는 예약을 삭제할 수 없다.

#### 테마 관리 페이지
- 모든 테마 목록을 조회할 수 있다.
  - 목록에는 각 테마의 이름, 설명, 썸네일이 포함된다.
- 새로운 테마를 추가할 수 있다.
  - 이미 존재하는 테마 이름으로 등록을 할 수 없다.
- 테마를 삭제할 수 있다.
  - 해당 테마에 예약이 존재하면 테마를 삭제할 수 없다.
  - 존재하지 않는 테마를 삭제할 수 없다.

#### 예약 시간 관리 페이지
- 모든 예약 가능 시간을 조회할 수 있다.
- 새로운 예약 가능 시간을 추가할 수 있다.
- 예약 가능 시간을 삭제할 수 있다.
  - 해당 시간대에 예약이 존재하면 시간을 삭제할 수 없다.
  - 존재하지 않는 시간대를 삭제할 수 없다.
